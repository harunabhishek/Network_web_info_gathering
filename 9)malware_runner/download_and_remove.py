#!/usr/bin/env python3

import requests, os, tempfile, optparse

def get_arguements():
    # Parse the arguements from command line
    parser=optparse.OptionParser()
    parser.add_option("-u","--url",dest="url",help="Url")
    options=parser.parse_args()[0]

    if not options.url:
        parser.error("[-] Please specify a url,use --help for more info")

    return options

def change_temp_dir():
    # Changes the directory to temporary directory
    temp_dir=tempfile.gettempdir()
    # print(temp_dir)
    os.chdir(temp_dir)

    download()

    global file_name
    # os.remove(file_name)                        # removes the file

def download():
    # Download the evil file to the temporary directory 
    url=options.url
    get_response = requests.get(url)
    # print(get_response.content)
    global file_name
    file_name=url.split("/") [-1]

    with open(file_name,"wb") as out_file:
        out_file.write(get_response.content)


# main code
# file_name=""
options = get_arguements()
change_temp_dir()                   
